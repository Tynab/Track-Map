@page "/profile"

@using Blazored.LocalStorage
@using Microsoft.AspNetCore.Authorization
@using TrackMap.Components
@using TrackMap.Services

@inject NavigationManager NavigationManager
@inject ILocalStorageService LocalStorageService
@inject IToastService ToastService
@inject IUserService UserService

@attribute [Authorize]

<PageTitle>Profile</PageTitle>

@if (User is null)
{
    <LoadingIndicator />
}
<div class="d-flex justify-content-center text-center">
    <div class="card w-25">
        <div class="card-body">
            <h5>Profile</h5>

            <EditForm Model="UserUpdate" OnValidSubmit="HandleUserUpdate">
                <DataAnnotationsValidator />

                <div class="mt-4">
                    <InputText class="form-control text-center" placeholder="Enter full name" @bind-Value="UserUpdate.FullName" />
                </div>

                <div class="mt-3">
                    <InputText class="form-control text-center" placeholder="Enter email" type="email" @bind-Value="UserUpdate.Email" />
                </div>

                <div class="mt-3">
                    <InputText class="form-control text-center" onkeypress="return event.charCode >= 48 && event.charCode <= 57" placeholder="Enter phone number" @bind-Value="UserUpdate.PhoneNumber" />
                </div>

                <div class="mt-3">
                    <InputText class="form-control text-center" placeholder="Enter password" type="password" @bind-Value="UserUpdate.Password" />
                </div>

                <div class="mt-4">
                    <button type="submit" class="btn btn-success">Save</button>
                </div>
            </EditForm>
        </div>
    </div>
</div>
